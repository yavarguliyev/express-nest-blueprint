# ==========================================
# Development Environment Configuration
# ==========================================
# Copy this file to .env and update the values

# App Configuration
NODE_ENV=development
PORT=3000
HOST=0.0.0.0

# App Role (API or WORKER)
APP_ROLE=API
COMPUTE_APP_ROLE=API
COMPUTE_AUTO_SPAWN=false

# Database Configuration
DB_HOST=postgres
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=password
DB_DATABASE=express_nest_db
DB_NAME=express_nest_db
DATABASE_URL=postgres://postgres:password@postgres:5432/express_nest_db
DB_SSL=false
DB_CONNECTION_LIMIT=10
DB_MIN_LIMIT=2

# PostgreSQL Container Config
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password
POSTGRES_DB=express_nest_db

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=

# Compute & Worker Configuration
COMPUTE_AUTO_SPAWN=false
COMPUTE_MIN_WORKERS=3
COMPUTE_MAX_WORKERS=8

# JWT Configuration
# IMPORTANT: Change this in production!
JWT_SECRET=dev_jwt_secret_key
JWT_EXPIRES_IN=24h

# Health Configuration
HEALTH_CHECK_SECRET=your_super_secret_jwt_key

# Graceful Shutdown
SHUT_DOWN_TIMER=5000
SHUTDOWN_RETRIES=3
SHUTDOWN_RETRY_DELAY=1000

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Storage (S3/MinIO) - Optional
STORAGE_STRATEGY=s3
STORAGE_ENDPOINT=http://minio:9000
STORAGE_PUBLIC_ENDPOINT=http://localhost:9000
STORAGE_ACCESS_KEY=minio_admin
STORAGE_SECRET_KEY=minio_password
STORAGE_BUCKET_NAME=express-nest-blueprint
STORAGE_REGION=us-east-1
STORAGE_FORCE_PATH_STYLE=true

# MinIO Container Config
MINIO_ROOT_USER=minio_admin
MINIO_ROOT_PASSWORD=minio_password

# Zookeeper Configuration
ZOOKEEPER_CLIENT_PORT=2181
ZOOKEEPER_TICK_TIME=2000

# Kafka Configuration
KAFKA_BROKER_ID=1
KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka:9092,PLAINTEXT_HOST://localhost:29092
KAFKA_LISTENER_SECURITY_PROTOCOL_MAP=PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT
KAFKA_INTER_BROKER_LISTENER_NAME=PLAINTEXT
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1
KAFKA_GROUP_INITIAL_REBALANCE_DELAY_MS=0
KAFKA_BROKERS=localhost:29092
KAFKA_CLIENT_ID=express-nest-blueprint
KAFKA_GROUP_ID=express-nest-blueprint-group
KAFKA_TOPIC_REPLICATION_FACTOR=1

# Log Silencing
KAFKAJS_NO_PARTITIONER_WARNING=1
DOTENV_CONFIG_SILENT=true
