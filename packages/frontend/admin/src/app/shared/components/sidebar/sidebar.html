<div class="sidebar-container glass-premium" [class.collapsed]="isCollapsed()" [class.mobile-open]="mobileOpen()" appDraggableResizable>
  <!-- Toggle Button -->
  <button class="sidebar-toggle" (click)="toggleSidebar()" [title]="isCollapsed() ? 'Expand Sidebar' : 'Collapse Sidebar'" appDraggableResizable="sidebar-toggle-btn">
    <span class="material-icons">{{ isCollapsed() ? 'menu_open' : 'menu' }}</span>
  </button>

  <div class="sidebar-header">
    <div class="logo-sm glow" (click)="navigateToProfile()" appDraggableResizable="sidebar-logo">
      @if (user()?.profileImageUrl) {
        <img [src]="user()?.profileImageUrl" alt="Profile">
      } @else {
        <span class="user-initials">{{ getUserInitials() }}</span>
      }
    </div>
    @if (!isCollapsed()) {
      <span class="brand-name clickable" (click)="navigateToProfile()" appDraggableResizable="sidebar-brand-name">{{ user()?.firstName }} {{ user()?.lastName }}</span>
    }
  </div>

  <nav class="sidebar-nav">
    <ul>
      @for (item of menuItems; track item.route) {
        <li>
          <a [routerLink]="item.route" routerLinkActive="active" class="nav-item" [title]="isCollapsed() ? item.label : ''" [appDraggableResizable]="'sidebar-nav-' + item.label">
            <span class="material-icons">{{ item.icon }}</span>
            @if (!isCollapsed()) {
              <span class="nav-label">{{ item.label }}</span>
            }
          </a>
        </li>
      }
    </ul>
  </nav>

  <div class="sidebar-footer">
    <button (click)="logout()" class="logout-btn btn-primary" [title]="isCollapsed() ? 'Logout' : ''" appDraggableResizable="sidebar-logout-btn">
      <span class="material-icons">logout</span>
      @if (!isCollapsed()) {
        <span>Logout</span>
      }
    </button>
  </div>
</div>
