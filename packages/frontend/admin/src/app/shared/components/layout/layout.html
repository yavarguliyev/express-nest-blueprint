<div class="app-layout">
  <!-- Mobile Overlay -->
  <div class="mobile-sidebar-overlay" [class.active]="mobileMenuOpen()" (click)="closeMobileMenu()"></div>

  <!-- Sidebar with mobile state -->
  <app-sidebar [mobileOpen]="mobileMenuOpen()"></app-sidebar>

  <div class="main-content" [class.sidebar-collapsed]="isCollapsed()">
    <app-topbar 
      [mobileMenuOpen]="mobileMenuOpen()"
      (toggleMobileMenu)="toggleMobileMenu()">
    </app-topbar>

    <app-draft-status-bar [config]="layoutDraftConfig()" (saveChanges)="saveLayoutChanges()" (resetChanges)="resetLayoutChanges()">
    </app-draft-status-bar>

    <main class="page-container" [class.sidebar-collapsed]="isCollapsed()">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
